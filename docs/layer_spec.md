# レイヤー機能仕様

## 初期状態
- 現在のキャンバスに描かれている内容をそのまま初期レイヤーとして保持する
- 初期レイヤーの識別名は「レイヤー1」とし、起動直後はこのレイヤーが選択状態となる
- 新規プロジェクト作成時も「レイヤー1」が最低1枚は存在する前提とする

## レイヤードック
- レイヤー操作は既存のミニドックと同様に常時表示される小型ドックで提供する
- ドックの配置はUI右側に常設することを基本とし、レスポンシブ要件は別途検討する
- レイヤーの表示要素は名称テキストと状態を示す簡易アイコンのみとし、サムネイルプレビューは提供しない

## 表示・出力
- レイヤー構成は内部状態として保持し、ブラウザのローカルストレージに自動保存して次回起動時に復元する
- ユーザーへの出力は従来どおり可視レイヤーを統合した単一PNGとする
- レイヤー単位の個別エクスポートは対応対象外とし、将来的な拡張余地として扱う
- レイヤーの可視/非表示や不透明度設定は統合出力時に反映される前提で実装する
- 描画・レイヤー操作は履歴に記録し、Undo/Redo（最大50ステップ、ショートカット Ctrl/Cmd+Z / Shift+Ctrl/Cmd+Z / Ctrl/Cmd+Y）で巻き戻し・やり直しできるようにする
